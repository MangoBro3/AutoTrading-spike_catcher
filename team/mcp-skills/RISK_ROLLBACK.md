# RISK_ROLLBACK (1차 초안)

## 1) 리스크 프레임
- 분류: 권한, 품질, 운영, 커뮤니케이션, 자동화 오남용
- 원칙: 사전 차단(Prevent) + 조기 탐지(Detect) + 즉시 복구(Rollback)

## 2) 주요 리스크 및 대응

### R1. 과도 권한 부여
- 징후: 비인가 수정/병합/배포 시도
- 영향: 보안/품질 사고
- 예방: 기본 deny, 역할별 allow 최소화
- 탐지: 감사로그 알림, 보호 브랜치 이벤트 모니터링
- 롤백: 해당 역할 권한 프로파일 즉시 기본값으로 복원

### R2. 품질게이트 우회
- 징후: 테스트 미통과 PR 병합
- 영향: 회귀 버그 증가
- 예방: CI 강제, TL 승인 규칙 명시
- 탐지: 머지 이력 vs CI 상태 자동 대조
- 롤백: 우회 권한 회수 + 문제 커밋 revert

### R3. 자동화 오남용(P2/P3)
- 징후: 대량 변경, 근거 없는 자동 추천 적용
- 영향: 설계 일관성 붕괴/결함 확대
- 예방: P3는 파일럿 범위 제한, human-in-the-loop
- 탐지: 변경량 임계치(파일수/라인수) 초과 알림
- 롤백: 자동화 비활성화, 수동 승인 모드 전환

### R4. 역할 충돌/책임 불명확
- 징후: 중복작업, 리뷰 지연
- 영향: 일정 지연, 품질 저하
- 예방: 역할 RACI 명시
- 탐지: 리드타임/대기시간 지표
- 롤백: TL 주도 재할당, WIP 제한 임시 강화

### R5. 문서-코드 불일치
- 징후: ADR/요구사항 최신화 누락
- 영향: 잘못된 구현/재작업
- 예방: PR 템플릿에 문서 동기화 항목 필수
- 탐지: 체크리스트 미통과 PR 차단
- 롤백: 배포/머지 홀드 후 문서 보강

## 3) 롤백 실행 수준
- Level 0 (국소): 개별 Skill 비활성화
- Level 1 (역할): 특정 역할의 write/execute 회수(read-only 전환)
- Level 2 (프로세스): PR 병합 일시 중지, 핫픽스 체계 전환
- Level 3 (전역): P2/P3 전체 중단, P1 최소운영 복귀

## 4) 롤백 Runbook (즉시 실행)
1. 사고 라벨링(권한/품질/운영)
2. 영향 범위 확인(브랜치, 파일, 서비스)
3. 해당 Level 롤백 적용
4. 데이터/코드 복구(revert, 권한 복원)
5. 재발방지 액션 등록(체크리스트/정책 수정)

## 5) 승인 체계
- Level 0~1: TL 승인
- Level 2: TL + PM 공동 승인
- Level 3: PM 최종 승인(옵션 main 동의)

## 6) 종료 조건
- 24시간 무사고 + 품질게이트 정상 + 체크리스트 재통과
